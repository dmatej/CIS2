<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<h:html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head xmlns:h="http://java.sun.com/jsf/html">
  <title>Detail osoby | CIS</title>
  <!-- [template css] begin -->
  <link rel="stylesheet" href="css/screen.css" type="text/css"
    media="screen, projection" />
  <link rel="stylesheet" href="css/960.css" type="text/css"
    media="screen, projection" />
  <link rel="stylesheet" href="css/print.css" type="text/css"
    media="print" />
  <!--[if IE]>
        <link rel="stylesheet" href="css/ie.css" type="text/css" media="screen, projection" />
    <![endif]-->
  <!-- [template css] end -->

  <!-- [template css javascript] begin -->
  <link rel="stylesheet" href="css/project.css" type="text/css"
    media="screen, projection" />
  <!-- [template css javascript] end -->
</h:head>

<f:metadata>
     <f:viewParam name="personid" value="#{personview.idperson}" />
     <f:event type="preRenderView" listener="#{personview.loadPerson}" />
</f:metadata>

<h:body>
  <!-- START TOP SECTION -->
  <div class="container_12">

    <!-- START LOGO -->
    <div class="grid_4 header">
      <a href="view-person.xhtml"><img src="images/logo.gif"
        alt="logo" /></a>
    </div>
    <!-- END LOGO -->

    <!-- START NAVIGATION -->
    <div class="grid_8 header">
      <div id="navigation">
        <ul id="nav">
          <li id="viewPerson"><a href="view-person.xhtml"
            title="Procházení osob">Procházení osob</a></li>
          <li id="registerPerson"><a href="create-person.xhtml"
            title="Registrace osoby">Registrace osoby</a></li>
        </ul>
      </div>
    </div>
    <!-- END NAVIGATION -->

    <div class="clear"></div>
  </div>
  <!-- END TOP SECTION -->


  <!-- START MEDIUM SECTION -->
  <div class="container_12 medium">
    <div class="grid_6">
      <div class="getTouch">
        <h2>Detail osoby</h2>
      </div>
    </div>
    <!--  VYHLEDÁNÍ OSOB -->
    <div class="grid_6">
      <div class="searchform">

        <form id="searchform" action="" method="post">
          <div class="formContent">
            <table><tr>
              <td>
              <label for="search">Vyhledat osobu</label>
            <input type="text" name="search" id="search" class="input required" value="" />
              </td>
              <td>
            <input type="submit" class="searchSubmit" value="Vyhledat" />
              </td>
            </tr></table>
          </div>
        </form>
     </div>
    </div>
    <div class="clear"></div>
  </div>
  <!-- END MEDIUM SECTION -->


  <!-- START BOTTOM SECTION -->
  <div class="container_12 bottom">
  <div class="grid_4 greyBg">
    <h:panelGrid columns="2">
      <h:outputText value="Jméno: " />
      <h:outputText value="#{personview.actualPersonIdentity.firstname}" />
      <h:outputText value="Příjmení: " />
      <h:outputText value="#{personview.actualPersonIdentity.lastname}" />
      <h:outputText value="Rodné jméno " />
      <h:outputText value="#{personview.actualPersonIdentity.birthname}" />
      <h:outputText value="Ostatní jména: " />
      <h:outputText value="#{personview.actualPersonIdentity.othernames}" />
    </h:panelGrid>
  </div>
  <div class="grid_4 greyBg">
    <h:panelGrid columns="2">
      <h:outputText value="Rodné číslo: " />
      <h:outputText value="#{personview.actualPersonIdentity.birthnumber}" />
      <h:outputText value="Místo narození: " />
      <h:outputText value="#{personview.actualPersonIdentity.birthplace}" />
      <h:outputText value="Stát narození: " />
      <h:outputText value="#{codes.findState(personview.actualPersonIdentity.idstateofbirth).name}" />
    </h:panelGrid>
  </div>
  <div class="grid_4 greyBg">
    <h:panelGrid columns="2">
      <h:outputText value="Aktuální stát v místě bydliště: " />
      <h:outputText value="#{codes.findState(personview.actualPersonIdentity.idstate).name}" />
      <h:outputText value="Datum narození: " />
      <h:outputText value="#{personview.actualPersonIdentity.birthdate}" />
      <h:outputText value="Pohlaví: " />
      <h:outputText value="#{personsview.formatSex(personview.actualPersonIdentity.sex)}" />
    </h:panelGrid>
  </div>

  <div class="clear"></div>
  </div>

    <div class="separator"></div>

  <div class="clear"></div>

  <div class="container_12 bottom">
    <div class="grid_12">
      <h:form id="formTabs">
        <span class="site">
            <h:commandLink value="Identity">
                <f:ajax event="click" render=":contentTabs" listener="#{tabcontrol.handleTabChange(1)}" />
            </h:commandLink>
        </span>&nbsp;
        <span class="site">
            <h:commandLink value="Pobyty">
                <f:ajax event="click" render=":contentTabs" listener="#{tabcontrol.handleTabChange(2)}" />
            </h:commandLink>
        </span>&nbsp;
        <span class="site">
            <h:commandLink value="Doklady">
                <f:ajax event="click" render=":contentTabs" listener="#{tabcontrol.handleTabChange(3)}" />
            </h:commandLink>
        </span>
      </h:form>
    </div>
    <div class="clear"></div>
  </div>

  <div class="clear"></div>

  <div class="container_12 bottom">
    <div class="grid_12">

      <h:panelGroup id="contentTabs">
          <h:panelGroup id="tab1" rendered="#{tabcontrol.renderedTab == 1}">

             <h:dataTable value="#{personview.listIdentities()}" var="i"
               styleClass="table"
               headerClass="table-header"
               rowClasses="table-odd-row, table-even-row">

               <h:column>
                   <!-- column header -->
                   <f:facet name="header">Jméno a příjmení</f:facet>
                   <!-- row record -->
                   #{i.firstname} #{i.lastname}
               </h:column>

               <h:column>
                   <f:facet name="header">Datum narození</f:facet>
                   #{i.birthdate}
               </h:column>

               <h:column>
                   <f:facet name="header">Aktuální stát</f:facet>
                   #{codes.findState(i.idstate).name}
               </h:column>

               <h:column>
                   <f:facet name="header">Pohlaví</f:facet>
                   #{personsview.formatSex(i.sex)}
               </h:column>

               <h:column>
                   <f:facet name="header">Akce</f:facet>

               </h:column>
           </h:dataTable>

          </h:panelGroup>

          <h:panelGroup id="tab2" rendered="#{tabcontrol.renderedTab == 2}">
            <h:outputText value="Tab 2 Content"/>

          </h:panelGroup>

          <h:panelGroup id="tab3" rendered="#{tabcontrol.renderedTab == 3}">
            <h:outputText value="Tab 3 Content"/>

          </h:panelGroup>
      </h:panelGroup>
  <div class="clear"></div>

    <!-- SEZNAM IDENTIT (ten {} kód je špatně, je to jen zkopírováno z view-person) -->
    <h:panelGrid rendered="#{true}">
      <table>
        <tr>
          <th>Jméno</th>
          <th>Příjmení</th>
          <th>Datum narození</th>
          <th>Aktuální stát</th>
          <th>Pohlaví</th>
          <th>Akce</th>
        </tr>
        <c:forEach items="#{personsview.listPersonsByActualIdentities()}"
          var="prsnIdentity">
          <tr>
            <td><h:outputText value="#{prsnIdentity.firstname}" /></td>
            <td><h:outputText value="#{prsnIdentity.lastname}" /></td>
            <td><h:outputText value="#{prsnIdentity.birthdate}" /></td>
            <td><h:outputText
                value="#{codes.findState(prsnIdentity.idstate).name}" /></td>
            <td><h:outputText
                value="#{personsview.formatSex(prsnIdentity.sex)}" /></td>
            <td>
            <h:outputLink value="identity-detail.xhtml">
                <h:outputText value="Detail" />
                <f:param name="personid" value="#{prsnIdentity.idperson}" />
            </h:outputLink>
            </td>
          </tr>
        </c:forEach>

      </table>
    </h:panelGrid>

    <!-- POBYTY ({} kód potřebuje někde doplnit) -->
    <h:panelGrid rendered="#{true}">
      <table>
        <tr>
          <th>Od</th>
          <th>Do</th>
          <th>Účel pobytu</th>
          <th>Akce</th>
        </tr>
        <c:forEach items="#{null}"
          var="">
          <tr>
            <td><h:outputText value="#{stay.grantedFrom}" /></td>
            <td><h:outputText value="#{stay.grantedTo}" /></td>
            <td><h:outputText value="#{stay.idpobytucel}" /></td>
            <td>
            <h:outputLink value="stay-detail.xhtml">
                <h:outputText value="Detail" />
                <f:param name="" value="" />
            </h:outputLink>
            </td>
          </tr>
        </c:forEach>

      </table>
    </h:panelGrid>

    <!-- DOKLADY ({} kód potřebuje někde doplnit) -->
    <h:panelGrid rendered="#{true}">
      <table>
        <tr>
          <th>Typ dokladu</th>
          <th>Číslo</th>
          <th>Vydávající stát</th>
          <th>Schválen od - do</th>
          <th>Akce</th>
        </tr>
        <c:forEach items="#{null}"
          var="">
          <tr>
            <td><h:outputText value="#{document.idcodedocumenttype}" /></td>
            <td><h:outputText value="#{document.number}" /></td>
            <td><h:outputText value="#{document.idstateissued}" /></td>
            <td><h:outputText value="#{document.getValidDates()}" /></td>
            <td>
            <h:outputLink value="document-detail.xhtml">
                <h:outputText value="Detail" />
                <f:param name="" value="" />
            </h:outputLink>
            </td>
          </tr>
        </c:forEach>

      </table>
    </h:panelGrid>


    </div>
    <div class="clear"></div>
  </div>


    <div class="clear"></div>

  <!-- END BOTTOM SECTION -->

  <!-- START FOOTER -->
  <div class="container_12">
    <p class="footer">
      Created by <strong>ICZ</strong> a.s. <br /> <a href="http://i.cz">http://i.cz</a>
    </p>
  </div>
  <!-- END FOOTER -->



</h:body>
</h:html>